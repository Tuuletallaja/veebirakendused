
<html>

<head>
  <meta charset="UTF-8">
  <!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript">
    // Load the Visualization API and the piechart package.
    google.charts.load('current', {
      'packages': ['corechart']
    });

    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChartUsers);
    google.charts.setOnLoadCallback(drawChartAge);
    google.charts.setOnLoadCallback(drawChartEngine);

    function drawChartUsers() {
      var jsonData = $.ajax({
        url: "chart1.php",
        dataType: "json",
        async: false,
        data: {
          koer: $("#blabla").val() 
        }
      }).responseText;

      var options = {
        title: 'Mängumootori kasutajate arv',
        sliceVisibilityThreshold: 0.02,
        width: 800,
        height: 400
      };


      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(jsonData);

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.PieChart(document.getElementById('user_stats'));
      chart.draw(data, options);
    }

    function drawChartAge() {
      var jsonData = $.ajax({
        url: "chart2.php",
        dataType: "json",
        async: false
      }).responseText;

      var options = {
        title: 'Inimeste vanus',
        sliceVisibilityThreshold: 0.01,
        width: 800,
        height: 400
      };


      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(jsonData);

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.PieChart(document.getElementById('users_age'));
      chart.draw(data, options);
    }

    function drawChartEngine() {
      var jsonData = $.ajax({
        url: "chart3.php",
        dataType: "json",
        async: false
      }).responseText;

      var options = {
        title: 'Rahulolu mängumootori valikuga',
        sliceVisibilityThreshold: 0.01,
        width: 800,
        height: 400
      };


      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(jsonData);

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.BarChart(document.getElementById('engine'));
      chart.draw(data, options);
    }
  </script>
</head>

<body>
  <!--Div that will hold the pie chart-->
  <input type="number" id="blabla" value=""> 
  <div id="user_stats"></div>
  <div id="users_age"></div>
  <div id="engine"></div>

  <script type="text/javascript"> 
       
    $("#blabla").on('change', function() { 
      drawChartUsers(); 
    }); 
  </script> 

</body>

</html>